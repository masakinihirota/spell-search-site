# 要件書

## はじめに

スペルトナエルゲームにおいて、プレイヤーが所持している歌の数字と呪文に必要な歌の数字のマッチング状況を視覚的に表示する機能です。この機能により、プレイヤーは各呪文に対してどの程度の歌を所持しているか、何が不足しているかを一目で把握できるようになります。

## 要件

### 要件1

**ユーザーストーリー:** ゲームプレイヤーとして、所持している歌の数字と呪文に必要な歌の数字のマッチング率を確認したい。そうすることで、どの呪文を唱えることができるか、または何が不足しているかを素早く判断できる。

#### 受け入れ基準

1. WHEN プレイヤーが呪文リストを表示する THEN システムは各呪文に対して所持歌数字のマッチング率をパーセンテージで表示する SHALL
2. WHEN 所持歌数字が「25」で必要歌数字が「258」の場合 THEN システムは66%のマッチング率を計算して表示する SHALL
3. WHEN マッチング率を計算する THEN システムは所持している数字の桁数を必要な数字の桁数で割った値をパーセンテージで表示する SHALL

### 要件2

**ユーザーストーリー:** ゲームプレイヤーとして、呪文に必要な歌のうち不足している数字を知りたい。そうすることで、どの歌を追加で入手すべきかを計画できる。

#### 受け入れ基準

1. WHEN プレイヤーが呪文リストを表示する THEN システムは各呪文に対して不足している歌の数字を表示する SHALL
2. WHEN 所持歌数字が「25」で必要歌数字が「258」の場合 THEN システムは不足数字「8」を表示する SHALL
3. WHEN 不足数字を計算する THEN システムは必要な数字から所持している数字を除いた残りの数字を表示する SHALL

### 要件3

**ユーザーストーリー:** ゲームプレイヤーとして、所持している歌の数字を呪文リストで確認したい。そうすることで、現在の所持状況を把握できる。

#### 受け入れ基準

1. WHEN プレイヤーが呪文リストを表示する THEN システムは各呪文に対して所持している歌の数字を表示する SHALL
2. WHEN 所持歌リストが更新される THEN システムは呪文リストの表示も自動的に更新する SHALL
3. WHEN 所持歌数字を表示する THEN システムは呪文の右上エリアに配置する SHALL

### 要件4

**ユーザーストーリー:** ゲームプレイヤーとして、マッチング情報を視覚的に分かりやすく確認したい。そうすることで、情報を素早く理解できる。

#### 受け入れ基準

1. WHEN マッチング情報を表示する THEN システムは所持歌数字、不足数字、マッチング率を呪文の右上に横並びで表示する SHALL（説明文なし）
2. WHEN マッチング情報を表示する THEN システムは各情報を異なる色で区別して表示する SHALL
3. WHEN マッチング率が100%の場合 THEN システムは完全マッチを示す特別な表示を行う SHALL
4. WHEN マッチング率が0%の場合 THEN システムは現在の背景色で表示する SHALL
5. WHEN マッチング率が1-49%の場合 THEN システムは薄い赤色の背景で表示する SHALL
6. WHEN マッチング率が50-74%の場合 THEN システムは薄い黄色の背景で表示する SHALL
7. WHEN マッチング率が75-99%の場合 THEN システムは薄い緑色の背景で表示する SHALL
8. WHEN マッチング率が100%の場合 THEN システムは濃い緑色の背景と太い枠線で表示する SHALL

### 要件5

**ユーザーストーリー:** ゲームプレイヤーとして、ダークモードとライトモードの両方でマッチング情報を確認したい。そうすることで、どちらのテーマでも快適に使用できる。

#### 受け入れ基準

1. WHEN ダークモードが有効な場合 THEN システムはダークモード用の色彩でマッチング情報を表示する SHALL
2. WHEN ライトモードが有効な場合 THEN システムはライトモード用の色彩でマッチング情報を表示する SHALL
3. WHEN テーマが切り替わる THEN システムは自動的にマッチング情報の表示色を更新する SHALL

### 要件6

**ユーザーストーリー:** ゲームプレイヤーとして、所持リストでもマッチング情報を確認したい。そうすることで、呪文リストと所持リストの両方で一貫した情報を得られる。

#### 受け入れ基準

1. WHEN プレイヤーが所持リストを表示する THEN システムは各アイテムに対してマッチング情報を表示する SHALL
2. WHEN 所持リストでマッチング情報を表示する THEN システムは呪文リストと同じ形式で表示する SHALL
3. WHEN 所持リストでマッチング率を表示する THEN システムは呪文リストと同じ背景色変更ルールを適用する SHALL
4. WHEN 所持リストでマッチング率が100%の場合 THEN システムは呪文リストと同様に太い枠線で表示する SHALL
5. WHEN 所持リストが更新される THEN システムはマッチング情報も自動的に更新する SHALL
